2025-10-16 12:24:19,345 [INFO] - Logger initialized. Writing to /opt/sdmproxy/logs/sdmproxy_local.log
2025-10-16 12:24:19,390 [INFO] - ðŸ”— Registered router /api/incidents
2025-10-16 12:24:19,391 [INFO] - ðŸ”— Registered router /api/requests
2025-10-16 12:24:19,392 [INFO] - ðŸ”— Registered router /api/changes
2025-10-16 12:24:19,393 [INFO] - ðŸ”— Registered router /api/issues
2025-10-16 12:24:19,394 [INFO] - ðŸ”— Registered router /api/contacts
2025-10-16 12:24:19,395 [INFO] - ðŸ”— Registered router /api/groups
2025-10-16 12:24:19,396 [INFO] - ðŸ”— Registered router /api/locations
2025-10-16 12:24:19,397 [INFO] - ðŸ”— Registered router /api/priorities
2025-10-16 12:24:19,398 [INFO] - ðŸ”— Registered router /api/urgencies
2025-10-16 12:24:19,399 [INFO] - ðŸ”— Registered router /api/impacts
2025-10-16 12:24:19,400 [INFO] - ðŸ”— Registered router /api/categories
2025-10-16 12:24:19,401 [INFO] - ðŸ”— Registered router /api/statuses
2025-10-16 12:24:19,402 [INFO] - ðŸ”— Registered router /api/request_types
2025-10-16 12:24:19,403 [INFO] - ðŸ”— Registered router /api/roles
2025-10-16 12:24:19,404 [INFO] - ðŸ”— Registered router /api/assets
2025-10-16 12:24:19,404 [INFO] - ðŸ”— Registered router /api/cis
2025-10-16 12:24:19,405 [INFO] - âœ… Registered router /api/incidents
2025-10-16 12:24:19,406 [INFO] - âœ… Registered router /api/requests
2025-10-16 12:24:19,407 [INFO] - âœ… Registered router /api/changes
2025-10-16 12:24:19,407 [INFO] - âœ… Registered router /api/issues
2025-10-16 12:24:19,408 [INFO] - âœ… Registered router /api/contacts
2025-10-16 12:24:19,410 [INFO] - âœ… Registered router /api/groups
2025-10-16 12:24:19,410 [INFO] - âœ… Registered router /api/locations
2025-10-16 12:24:19,411 [INFO] - âœ… Registered router /api/priorities
2025-10-16 12:24:19,412 [INFO] - âœ… Registered router /api/urgencies
2025-10-16 12:24:19,412 [INFO] - âœ… Registered router /api/impacts
2025-10-16 12:24:19,413 [INFO] - âœ… Registered router /api/categories
2025-10-16 12:24:19,413 [INFO] - âœ… Registered router /api/statuses
2025-10-16 12:24:19,414 [INFO] - âœ… Registered router /api/request_types
2025-10-16 12:24:19,415 [INFO] - âœ… Registered router /api/roles
2025-10-16 12:24:19,415 [INFO] - âœ… Registered router /api/assets
2025-10-16 12:24:19,416 [INFO] - âœ… Registered router /api/cis
2025-10-16 12:24:19,416 [INFO] - === SDM Proxy Service v2.0 initialized ===
INFO:     Started server process [1617584]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://10.11.36.14:3333 (Press CTRL+C to quit)
2025-10-16 12:24:41,319 [INFO] - [SDMClient] Fetching cr list (size=10000)
2025-10-16 12:24:41,319 [INFO] - Fetching new SDM session token (JSON)...
2025-10-16 12:24:41,351 [ERROR] - [CR] Error in count: Authentication failed (401)
Traceback (most recent call last):
  File "/opt/sdmproxy/app/routers/__init__.py", line 45, in count_records
    data = sdm_client.get_full_list(object_name, where=where, size=10000)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/sdm_client.py", line 43, in get_full_list
    data = self.call_sdm("GET", f"{object_name}", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/sdm_client.py", line 14, in call_sdm
    token = auth_manager.get_token()
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/auth_manager.py", line 25, in get_token
    raise Exception(f"Authentication failed ({r.status_code})")
Exception: Authentication failed (401)
2025-10-16 12:24:48,221 [INFO] - [SDMClient] Fetching cr list (size=10000)
2025-10-16 12:24:48,222 [INFO] - Fetching new SDM session token (JSON)...
2025-10-16 12:24:48,248 [ERROR] - [CR] Error in count: Authentication failed (401)
Traceback (most recent call last):
  File "/opt/sdmproxy/app/routers/__init__.py", line 45, in count_records
    data = sdm_client.get_full_list(object_name, where=where, size=10000)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/sdm_client.py", line 43, in get_full_list
    data = self.call_sdm("GET", f"{object_name}", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/sdm_client.py", line 14, in call_sdm
    token = auth_manager.get_token()
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/auth_manager.py", line 25, in get_token
    raise Exception(f"Authentication failed ({r.status_code})")
Exception: Authentication failed (401)
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1617584]
2025-10-16 12:31:28,759 [INFO] - Logger initialized. Writing to /opt/sdmproxy/logs/sdmproxy_local.log
2025-10-16 12:31:28,808 [INFO] - [AUTH] No valid cached token found, will fetch a new one
2025-10-16 12:31:28,809 [INFO] - ðŸ”— Registered router /api/incidents
2025-10-16 12:31:28,810 [INFO] - ðŸ”— Registered router /api/requests
2025-10-16 12:31:28,811 [INFO] - ðŸ”— Registered router /api/changes
2025-10-16 12:31:28,812 [INFO] - ðŸ”— Registered router /api/issues
2025-10-16 12:31:28,814 [INFO] - ðŸ”— Registered router /api/contacts
2025-10-16 12:31:28,815 [INFO] - ðŸ”— Registered router /api/groups
2025-10-16 12:31:28,816 [INFO] - ðŸ”— Registered router /api/locations
2025-10-16 12:31:28,817 [INFO] - ðŸ”— Registered router /api/priorities
2025-10-16 12:31:28,818 [INFO] - ðŸ”— Registered router /api/urgencies
2025-10-16 12:31:28,819 [INFO] - ðŸ”— Registered router /api/impacts
2025-10-16 12:31:28,820 [INFO] - ðŸ”— Registered router /api/categories
2025-10-16 12:31:28,821 [INFO] - ðŸ”— Registered router /api/statuses
2025-10-16 12:31:28,822 [INFO] - ðŸ”— Registered router /api/request_types
2025-10-16 12:31:28,823 [INFO] - ðŸ”— Registered router /api/roles
2025-10-16 12:31:28,824 [INFO] - ðŸ”— Registered router /api/assets
2025-10-16 12:31:28,824 [INFO] - ðŸ”— Registered router /api/cis
2025-10-16 12:31:28,826 [INFO] - âœ… Registered router /api/incidents
2025-10-16 12:31:28,827 [INFO] - âœ… Registered router /api/requests
2025-10-16 12:31:28,828 [INFO] - âœ… Registered router /api/changes
2025-10-16 12:31:28,828 [INFO] - âœ… Registered router /api/issues
2025-10-16 12:31:28,829 [INFO] - âœ… Registered router /api/contacts
2025-10-16 12:31:28,830 [INFO] - âœ… Registered router /api/groups
2025-10-16 12:31:28,830 [INFO] - âœ… Registered router /api/locations
2025-10-16 12:31:28,831 [INFO] - âœ… Registered router /api/priorities
2025-10-16 12:31:28,832 [INFO] - âœ… Registered router /api/urgencies
2025-10-16 12:31:28,832 [INFO] - âœ… Registered router /api/impacts
2025-10-16 12:31:28,833 [INFO] - âœ… Registered router /api/categories
2025-10-16 12:31:28,833 [INFO] - âœ… Registered router /api/statuses
2025-10-16 12:31:28,834 [INFO] - âœ… Registered router /api/request_types
2025-10-16 12:31:28,835 [INFO] - âœ… Registered router /api/roles
2025-10-16 12:31:28,835 [INFO] - âœ… Registered router /api/assets
2025-10-16 12:31:28,836 [INFO] - âœ… Registered router /api/cis
2025-10-16 12:31:28,836 [INFO] - === SDM Proxy Service v2.0 initialized ===
INFO:     Started server process [1617599]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://10.11.36.14:3333 (Press CTRL+C to quit)
2025-10-16 12:31:59,055 [INFO] - [SDMClient] Fetching cr list (size=10000)
2025-10-16 12:31:59,056 [INFO] - [AUTH] Requesting new SDM token via XML login at http://10.11.35.35:8050/caisd-rest/rest_access
2025-10-16 12:31:59,072 [ERROR] - [AUTH] SDM XML login failed (401): <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
    <message>Invalid Authorization message header.</message>
    <status>401</status>
</error>

2025-10-16 12:31:59,072 [ERROR] - [CR] Error in count: SDM XML login failed (401)
Traceback (most recent call last):
  File "/opt/sdmproxy/app/routers/__init__.py", line 45, in count_records
    data = sdm_client.get_full_list(object_name, where=where, size=10000)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/sdm_client.py", line 43, in get_full_list
    data = self.call_sdm("GET", f"{object_name}", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/sdm_client.py", line 14, in call_sdm
    token = auth_manager.get_token()
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/auth_manager.py", line 51, in get_token
    return self.fetch_new_token()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/sdmproxy/app/auth_manager.py", line 68, in fetch_new_token
    raise Exception(f"SDM XML login failed ({resp.status_code})")
Exception: SDM XML login failed (401)
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1617599]
2025-10-16 12:57:08,373 [INFO] - Logger initialized. Writing to /opt/sdmproxy/logs/sdmproxy_local.log
2025-10-16 12:57:08,419 [INFO] - [AUTH] No valid cached token found â€” will request new one
2025-10-16 12:57:08,421 [INFO] - ðŸ”— Registered router /api/incidents
2025-10-16 12:57:08,422 [INFO] - ðŸ”— Registered router /api/requests
2025-10-16 12:57:08,423 [INFO] - ðŸ”— Registered router /api/changes
2025-10-16 12:57:08,424 [INFO] - ðŸ”— Registered router /api/issues
2025-10-16 12:57:08,425 [INFO] - ðŸ”— Registered router /api/contacts
2025-10-16 12:57:08,426 [INFO] - ðŸ”— Registered router /api/groups
2025-10-16 12:57:08,427 [INFO] - ðŸ”— Registered router /api/locations
2025-10-16 12:57:08,428 [INFO] - ðŸ”— Registered router /api/priorities
2025-10-16 12:57:08,429 [INFO] - ðŸ”— Registered router /api/urgencies
2025-10-16 12:57:08,430 [INFO] - ðŸ”— Registered router /api/impacts
2025-10-16 12:57:08,431 [INFO] - ðŸ”— Registered router /api/categories
2025-10-16 12:57:08,432 [INFO] - ðŸ”— Registered router /api/statuses
2025-10-16 12:57:08,433 [INFO] - ðŸ”— Registered router /api/request_types
2025-10-16 12:57:08,433 [INFO] - ðŸ”— Registered router /api/roles
2025-10-16 12:57:08,434 [INFO] - ðŸ”— Registered router /api/assets
2025-10-16 12:57:08,435 [INFO] - ðŸ”— Registered router /api/cis
2025-10-16 12:57:08,436 [INFO] - âœ… Registered router /api/incidents
2025-10-16 12:57:08,438 [INFO] - âœ… Registered router /api/requests
2025-10-16 12:57:08,438 [INFO] - âœ… Registered router /api/changes
2025-10-16 12:57:08,439 [INFO] - âœ… Registered router /api/issues
2025-10-16 12:57:08,440 [INFO] - âœ… Registered router /api/contacts
2025-10-16 12:57:08,440 [INFO] - âœ… Registered router /api/groups
2025-10-16 12:57:08,441 [INFO] - âœ… Registered router /api/locations
2025-10-16 12:57:08,441 [INFO] - âœ… Registered router /api/priorities
2025-10-16 12:57:08,442 [INFO] - âœ… Registered router /api/urgencies
2025-10-16 12:57:08,443 [INFO] - âœ… Registered router /api/impacts
2025-10-16 12:57:08,443 [INFO] - âœ… Registered router /api/categories
2025-10-16 12:57:08,444 [INFO] - âœ… Registered router /api/statuses
2025-10-16 12:57:08,444 [INFO] - âœ… Registered router /api/request_types
2025-10-16 12:57:08,445 [INFO] - âœ… Registered router /api/roles
2025-10-16 12:57:08,446 [INFO] - âœ… Registered router /api/assets
2025-10-16 12:57:08,446 [INFO] - âœ… Registered router /api/cis
2025-10-16 12:57:08,447 [INFO] - === SDM Proxy Service v2.0 initialized ===
INFO:     Started server process [1617615]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://10.11.36.14:3333 (Press CTRL+C to quit)
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1617615]
2025-10-16 13:50:14,426 [INFO] - Logger initialized. Writing to /opt/sdmproxy/app/../logs/sdmproxy.log
2025-10-16 13:50:14,473 [INFO] - [AUTH] No valid cached token found â€” will request new one
2025-10-16 13:50:14,475 [INFO] - ðŸ”— Registered router /api/incidents
2025-10-16 13:50:14,476 [INFO] - ðŸ”— Registered router /api/requests
2025-10-16 13:50:14,477 [INFO] - ðŸ”— Registered router /api/changes
2025-10-16 13:50:14,478 [INFO] - ðŸ”— Registered router /api/issues
2025-10-16 13:50:14,479 [INFO] - ðŸ”— Registered router /api/contacts
2025-10-16 13:50:14,480 [INFO] - ðŸ”— Registered router /api/groups
2025-10-16 13:50:14,481 [INFO] - ðŸ”— Registered router /api/locations
2025-10-16 13:50:14,482 [INFO] - ðŸ”— Registered router /api/priorities
2025-10-16 13:50:14,483 [INFO] - ðŸ”— Registered router /api/urgencies
2025-10-16 13:50:14,484 [INFO] - ðŸ”— Registered router /api/impacts
2025-10-16 13:50:14,485 [INFO] - ðŸ”— Registered router /api/categories
2025-10-16 13:50:14,486 [INFO] - ðŸ”— Registered router /api/statuses
2025-10-16 13:50:14,487 [INFO] - ðŸ”— Registered router /api/request_types
2025-10-16 13:50:14,488 [INFO] - ðŸ”— Registered router /api/roles
2025-10-16 13:50:14,489 [INFO] - ðŸ”— Registered router /api/assets
2025-10-16 13:50:14,490 [INFO] - ðŸ”— Registered router /api/cis
2025-10-16 13:50:14,494 [INFO] - === SDM Proxy Service Loaded ===
INFO:     Started server process [1617687]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://10.11.36.14:3333 (Press CTRL+C to quit)
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1617687]
2025-10-16 14:18:56,811 [INFO] - Logger initialized. Writing to /opt/sdmproxy/app/../logs/sdmproxy.log
2025-10-16 14:18:56,859 [INFO] - [AUTH] No valid cached token found â€” will request new one
2025-10-16 14:18:56,861 [INFO] - ðŸ”— Registered router /api/incidents
2025-10-16 14:18:56,862 [INFO] - ðŸ”— Registered router /api/requests
2025-10-16 14:18:56,863 [INFO] - ðŸ”— Registered router /api/changes
2025-10-16 14:18:56,863 [INFO] - ðŸ”— Registered router /api/issues
2025-10-16 14:18:56,865 [INFO] - ðŸ”— Registered router /api/contacts
2025-10-16 14:18:56,866 [INFO] - ðŸ”— Registered router /api/groups
2025-10-16 14:18:56,867 [INFO] - ðŸ”— Registered router /api/locations
2025-10-16 14:18:56,868 [INFO] - ðŸ”— Registered router /api/priorities
2025-10-16 14:18:56,868 [INFO] - ðŸ”— Registered router /api/urgencies
2025-10-16 14:18:56,869 [INFO] - ðŸ”— Registered router /api/impacts
2025-10-16 14:18:56,870 [INFO] - ðŸ”— Registered router /api/categories
2025-10-16 14:18:56,871 [INFO] - ðŸ”— Registered router /api/statuses
2025-10-16 14:18:56,872 [INFO] - ðŸ”— Registered router /api/request_types
2025-10-16 14:18:56,873 [INFO] - ðŸ”— Registered router /api/roles
2025-10-16 14:18:56,874 [INFO] - ðŸ”— Registered router /api/assets
2025-10-16 14:18:56,875 [INFO] - ðŸ”— Registered router /api/cis
INFO:     Started server process [1617720]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://10.11.36.14:3333 (Press CTRL+C to quit)
2025-10-16 14:18:57,866 [INFO] - [AUTH] Requesting new SDM token from http://10.11.35.35:8050/caisd-rest/rest_access
2025-10-16 14:18:57,878 [ERROR] - [AUTH] Authentication failed (401): <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
    <message>Invalid Authorization message header.</message>
    <status>401</status>
</error>

2025-10-16 14:18:57,878 [ERROR] - [GENERIC][QUERY] SDM XML login failed (401)
